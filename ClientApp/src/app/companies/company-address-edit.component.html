<h2 class="display-3">{{title}}</h2>

<p *ngIf="this.addressId && !address"><em>Loading...</em></p>

<div class="row">
  <div class="col-12">
    <div class="form" [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="form-group">

        <div class="row">
          <div class="col-6">
            <div class="form-group">
              <div class="custom-control custom-checkbox mb-3">
                <input type="checkbox" id="primary" formControlName="primary" checked class="custom-control-input" />
                <label for="primary" class="custom-control-label">Primary Address</label>
              </div>

            </div>
          </div>
          <div class="col-6">
            <div class="form-group">
              <label for="addressType">Address Type</label>
              <mat-form-field *ngIf="addressTypes">
                <mat-label>Select an Address Type</mat-label>
                <mat-select id="addressType" formControlName="addressType">
                  <mat-option *ngFor="let addressType of addressTypes" [value]="addressType.addressTypeId">{{addressType.addressTypeDesc}}</mat-option>
                </mat-select>
              </mat-form-field>
              <div *ngIf="hasError('addressType')" class="invalid-feedback">
                <div *ngIf="form.get('addressType').errors?.required">
                  Address Type is required.
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-12">
            <div class="form-group">
              <label for="address1">Address Line 1:</label>
              <input type="text" id="address1" formControlName="address1" required placeholder="Address Line 1..." class="form-control" />
              <div *ngIf="hasError('address1')" class="invalid-feedback">
                <div *ngIf="form.get('address1').errors?.required">
                  Address Line 1 is required.
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-12">
            <div class="form-group">
              <label for="address2">Address Line 2:</label>
              <input type="text" id="address2" formControlName="address2" placeholder="Address Line 2 (optional)..." class="form-control" />
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-3">
            <div class="form-group">
              <label for="city">City:</label>
              <input type="text" id="city" formControlName="city" required placeholder="City..." class="form-control" />
              <div *ngIf="hasError('city')" class="invalid-feedback">
                <div *ngIf="form.get('city').errors?.required">
                  City is required.
                </div>
              </div>
            </div>
          </div>
          <div class="col-3">
            <div class="form-group">
              <label for="addressType">State</label>
              <mat-form-field *ngIf="states">
                <mat-label>Select a State</mat-label>
                <mat-select id="state" formControlName="state">
                  <mat-option *ngFor="let state of states" [value]="state.stateCode">{{state.stateName}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
          <div class="col-3">
            <div class="form-group">
              <label for="zip">Zip Code:</label>
              <input type="text" id="zip" formControlName="zip" placeholder="Zip Code..." class="form-control" />
            </div>
          </div>
          <div class="col-3">
            <div class="form-group">
              <label for="country">Country </label>
              <mat-form-field *ngIf="countries">
                <mat-label>Select a Country</mat-label>
                <mat-select id="country" formControlName="country">
                  <mat-option *ngFor="let country of countries" [value]="country.countryId">{{country.countryName}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-4">
            <div class="form-group">
              <label for="phone">Phone:</label>
              <input type="text" id="phone" formControlName="phone" placeholder="Phone Number..." class="form-control" />
            </div>
          </div>
          <div class="col-4">
            <div class="form-group">
              <label for="tollFree">Toll-Free:</label>
              <input type="text" id="tollFree" formControlName="tollFree" placeholder="Toll-Free Number..." class="form-control" />
            </div>
          </div>
          <div class="col-4">
            <div class="form-group">
              <label for="fax">Fax:</label>
              <input type="text" id="fax" formControlName="fax" placeholder="Fax Number..." class="form-control" />
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="form-group commands">
      <button type="submit" (click)="onSubmit()" class="btn btn-success" *ngIf="!addressId" [disabled]="form.invalid">Create Address</button>
      <button type="submit" (click)="onSubmit()" class="btn btn-success" *ngIf="addressId" [disabled]="form.invalid">Save</button>
      <button type="submit" [routerLink]="['/company', companyId]" class="btn btn-default">Cancel</button>
      <button type="button" *ngIf="addressId" (click)="onDelete()" class="btn btn-danger">Delete</button>
    </div>

  </div>
</div>


<!--<div class="help-block">
  {{ form.value | json }}
</div>-->
